"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[231],{231:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(5043),i=a(784),r=a(9722);const n=async e=>await(e=>{const{url:t,method:a,data:s,headers:i}=e;return r.A.request({baseURL:"https://fakestoreapi.in/api",url:t,method:a,data:s,headers:i})})({url:"/products?page=".concat(e,"&limit=12")});const l=function(){return(0,i.q)({queryKey:["productListKey"],queryFn:e=>{let{pageParam:t}=e;return n(t)},initialPageParam:1,getNextPageParam:(e,t,a,s)=>a<13?a+1:void 0})};var c=a(579);const o=function(e){var t;const{title:a,image:s,price:i,category:r}=null!==(t=e.item)&&void 0!==t?t:{};return(0,c.jsxs)("div",{className:"bg-white shadow-[0_1px_4px_rgba(0,0,0,.15)] p-4 rounded-[10px] cursor-pointer",children:[(0,c.jsx)("img",{src:s,alt:"product image",className:"w-full h-48 object-contain",loading:"lazy"}),(0,c.jsxs)("h6",{className:"text-primary font-[700] text-center py-2",children:["$",i]}),(0,c.jsx)("h6",{className:"text-background text-[16px] font-[600] two-line-ellipsis text-center",children:a}),(0,c.jsx)("p",{className:"text-background text-center text-[14px] mt-[20px] capitalize",children:r})]})};var d=a(4997),x=a(9150),u=a(7051),m=a(2041),h=a(2517);const p=["audio","mobile","laptop","tv","appliances","gaming"];const g=function(e){var t,a;const{filters:s,setFilters:i}=e,r=(e,t)=>{i((a=>(0,u.A)((0,u.A)({},a),{},{[e]:t})))};return(0,c.jsx)("div",{className:"flex items-baseline justify-end border-b border-gray-200 pb-6 pt-10 md:pt-24",children:(0,c.jsxs)("div",{className:"flex  items-center",children:[(0,c.jsxs)(m.W1,{as:"div",className:"relative inline-block text-left mr-[16px]",children:[(0,c.jsx)("div",{children:(0,c.jsxs)(m.IU,{className:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900 capitalize",children:[null!==(t=null===s||void 0===s?void 0:s.category)&&void 0!==t?t:"Category",(0,c.jsx)(h.A,{"aria-hidden":"true",className:"-mr-1 ml-1 size-5 shrink-0 text-gray-400 group-hover:text-gray-500"})]})}),(0,c.jsx)(m.c,{transition:!0,className:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black/5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:(0,c.jsx)("div",{className:"py-1",children:p.map(((e,t)=>(0,c.jsx)(m.Dr,{children:(0,c.jsx)("a",{onClick:()=>r("category",e),className:"block px-4 py-2 text-sm data-[focus]:bg-gray-100 data-[focus]:outline-none text-gray-500 capitalize",children:e})},"category-".concat(t))))})})]}),(0,c.jsxs)(m.W1,{as:"div",className:"relative inline-block text-left",children:[(0,c.jsx)("div",{children:(0,c.jsxs)(m.IU,{className:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900 capitalize",children:[null!==(a=null===s||void 0===s?void 0:s.sort)&&void 0!==a?a:"Sort",(0,c.jsx)(h.A,{"aria-hidden":"true",className:"-mr-1 ml-1 size-5 shrink-0 text-gray-400 group-hover:text-gray-500"})]})}),(0,c.jsx)(m.c,{transition:!0,className:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black/5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:(0,c.jsxs)("div",{className:"py-1",children:[(0,c.jsx)(m.Dr,{children:(0,c.jsx)("a",{className:"block px-4 py-2 text-sm data-[focus]:bg-gray-100 data-[focus]:outline-none text-gray-500",onClick:()=>r("sort","lowToHigh"),children:"Price: Low to High"})}),(0,c.jsx)(m.Dr,{children:(0,c.jsx)("a",{className:"block px-4 py-2 text-sm data-[focus]:bg-gray-100 data-[focus]:outline-none text-gray-500",onClick:()=>r("sort","highToLow"),children:"Price: High to Low"})})]})})]})]})})};var v=a(5213),j=a(7591);const y=function(e){const{productDetail:t,isOpen:a,setIsOpen:s}=e;return(0,c.jsxs)(v.lG,{open:a,onClose:()=>s(!1),className:"relative z-50",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,c.jsx)("div",{className:"fixed inset-0 flex w-screen items-center justify-center p-4",children:(0,c.jsxs)(v.Lj,{className:"mx-auto my-[20px] max-w-screen-lg rounded bg-white p-6 max-h-[90vh] overflow-y-auto",children:[(0,c.jsx)(v.L3,{className:"text-right",children:(0,c.jsxs)("button",{onClick:()=>s(!1),className:" text-black p-2 rounded-full hover:bg-gray-200",children:[(0,c.jsx)(j.A,{className:"w-6 h-6"})," "]})}),(0,c.jsx)("img",{src:null===t||void 0===t?void 0:t.image,alt:"product image",className:"w-full h-48 object-contain"}),(0,c.jsxs)("h6",{className:"text-primary font-[700] text-center py-2",children:["$",null===t||void 0===t?void 0:t.price]}),(0,c.jsx)("h6",{className:"text-background text-[20px] font-[600] mb-[16px] text-center",children:null===t||void 0===t?void 0:t.title}),(0,c.jsx)("p",{className:"text-background text-center text-[16px]",children:null===t||void 0===t?void 0:t.description})]})})]})};const f=function(){var e;const[t,a]=(0,s.useState)({}),[i,r]=(0,s.useState)({}),[n,u]=(0,s.useState)(!1),{data:m,isError:h,isLoading:p,fetchNextPage:v,isFetchingNextPage:j}=l(),f=(null!==(e=null===m||void 0===m?void 0:m.pages)&&void 0!==e?e:[]).map((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.products})).reduce(((e,t)=>e.concat(t)),[]),N=(0,s.useMemo)((()=>f.filter((e=>!t.category||e.category===t.category)).sort(((e,a)=>"lowToHigh"===t.sort?e.price-a.price:"highToLow"===t.sort?a.price-e.price:0))),[t,f]);return p?(0,c.jsx)("div",{className:"h-svh flex justify-center items-center",children:(0,c.jsx)(x.A,{})}):h?(0,c.jsx)("div",{className:"container mx-auto px-4 py-10 my-10 text-center",children:(0,c.jsx)("p",{className:"text-primary text-[20px]",children:"Something went wrong, please Refresh the Page"})}):(0,c.jsxs)("section",{className:"py-5",children:[(0,c.jsxs)("div",{className:"container mx-auto",children:[(0,c.jsx)("div",{className:"px-4",children:(0,c.jsx)(g,{setFilters:a,filters:t})}),(0,c.jsx)(d.A,{dataLength:N.length,next:v,hasMore:!0,loader:j&&(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsx)(x.A,{})}),pullDownToRefreshThreshold:50,children:(null===N||void 0===N?void 0:N.length)>0?(0,c.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5 px-4 py-5",children:N.map(((e,t)=>(0,c.jsx)("div",{onClick:()=>{r(e),u(!0)},children:(0,c.jsx)(o,{item:e})},"item-".concat(t))))}):(0,c.jsx)("div",{className:"flex justify-center py-10 mt-10",children:(0,c.jsx)("h5",{className:"text-primary text-[24px]",children:"No Products Found"})})})]}),(0,c.jsx)(y,{productDetail:i,isOpen:n,setIsOpen:u})]})}}}]);
//# sourceMappingURL=231.38d2111f.chunk.js.map